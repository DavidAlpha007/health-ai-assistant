# 埋点明细对照表

## 一、通用埋点规范

### 1. 埋点ID命名规则
`MVP_模块_行为`

### 2. 上报字段
| 字段名称 | 字段类型 | 字段描述 | 是否必填 |
|---------|---------|---------|---------|
| event_id | String | 埋点ID | 是 |
| timestamp | Long | 事件触发时间戳（毫秒） | 是 |

### 3. 上报方式
- 即时上报：事件触发后立即上报
- 仅上报埋点ID和时间戳，无其他字段

## 二、8个核心埋点明细

| 埋点ID | 触发页面 | 触发条件 | 埋点描述 |
|-------|---------|---------|---------|
| MVP_Login_Enter | 登录页 | 页面加载完成 | 用户进入登录页面 |
| MVP_Login_Succ | 登录页 | 登录验证成功 | 用户登录成功 |
| MVP_Scene_Enter | 场景选择页 | 页面加载完成 | 用户进入场景选择页面 |
| MVP_Scene_Click_Neck | 场景选择页 | 点击「肩颈酸痛」场景 | 用户选择肩颈酸痛场景 |
| MVP_Scene_Click_Eye | 场景选择页 | 点击「用眼过度」场景 | 用户选择用眼过度场景 |
| MVP_Scene_Click_Back | 场景选择页 | 点击「久坐腰背僵硬」场景 | 用户选择久坐腰背僵硬场景 |
| MVP_Plan_Finish | 方案详情页 | 计时结束（用户完成方案执行） | 用户完成方案执行 |
| MVP_Active_Succ | 方案详情页 | 点击「一键打卡」并成功 | 用户激活成功 |

## 三、埋点触发机制

### 1. 页面加载埋点
- Android：在Activity的onCreate方法中触发
- iOS：在ViewController的viewDidLoad方法中触发

### 2. 点击事件埋点
- Android：在按钮的OnClickListener中触发
- iOS：在按钮的addTarget方法中触发

### 3. 计时结束埋点
- 在方案详情页的计时功能中，当计时结束时触发

### 4. 打卡成功埋点
- 在打卡请求成功返回后触发

## 四、埋点数据验证方式

1. **前端验证**：
   - 在埋点触发时，打印日志记录埋点ID和时间戳
   - 验证日志输出是否符合预期

2. **后端验证**：
   - 在后端埋点计数表中查看埋点触发次数
   - 验证数据是否与前端触发次数一致

3. **联调验证**：
   - 按核心用户激活路径完整走查，触发所有8个埋点
   - 验证后端是否能正常接收到所有埋点数据

## 五、异常情况处理

1. **网络异常**：
   - MVP版本暂不处理网络异常情况，埋点数据可能丢失
   - 后续版本可考虑添加本地缓存机制

2. **重复触发**：
   - 确保同一事件在短时间内不会重复触发
   - 如登录成功埋点，在24小时内仅触发一次

3. **无效埋点**：
   - 定期检查埋点数据，移除无效埋点
   - 优化埋点触发条件，提高数据准确性